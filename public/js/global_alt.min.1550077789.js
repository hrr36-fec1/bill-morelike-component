var MC_LOCAL_STORE={_ls:-1,getStorage:function(){if(MC_LOCAL_STORE._ls==-1){try{MC_LOCAL_STORE._ls=window.localStorage;}catch(a){MC_LOCAL_STORE._ls=null;}}return MC_LOCAL_STORE._ls;},test:function(){var a="mc_test";return(MC_LOCAL_STORE.save(a,a)==a);},save:function(b,c){var a=MC_LOCAL_STORE.getStorage();if(a){try{a.setItem(b,c);}catch(d){}}else{MetaC.Cookie.save(b,c,8760);}return MC_LOCAL_STORE.get(b);},get:function(b){var a=MC_LOCAL_STORE.getStorage();if(a){try{return window.localStorage.getItem(b);
}catch(c){return null;}}else{return MetaC.Cookie.get(b);}},remove:function(b){var a=MC_LOCAL_STORE.getStorage();if(a){try{window.localStorage.removeItem(b);}catch(c){}}else{MetaC.Cookie.remove(b);}},asBool:function(a){return typeof a=="string"?(a=="true"||a=="1"):a;},saveBoolTimestamp:function(b,a){var c=new Date().getTime()+"_"+a;MC_LOCAL_STORE.save(b,c);},getBoolTimestamp:function(b,c){c=c?c:31536000000;var a=null;var f=MC_LOCAL_STORE.get(b);if(f!=null){var e=f.split("_");if(e.length>1){var d=e[0];
d=parseInt(d,10);if(!isNaN(d)){if(c){if(new Date().getTime()-d<c){var g=e[1];return MC_LOCAL_STORE.asBool(g);}}}}}return a;}};var MetaC={adsDisplayed:false,_utagAutoPlay:-1,getTrackProductType:function(b){var a=b;if(a=="tv"){a="tvshow";}else{if(a=="music"){a="album";}}return a;},getSecureUrl:function(d){var e=document.domain;if(e.match(/metacritic.com$/)==null){return d;}var a=e.split(".");var c="http";var b="";if(a.length>0){if(a[0]!="secure"){if(a[0]=="www"){a[0]="secure";}else{if((a[0].indexOf("app")==0&&a[1]=="web")||(a[0].indexOf("alb-qa")==0)){a.unshift("secure");
}}}if(a[0]=="secure"){c="https";}e=a.join(".");if(!(window.location.port=="443"||window.location.port=="80"||window.location.port=="")){b=":"+window.location.port;}}return c+"://"+e+b+d;},goSecure:function(a){window.location.href=MetaC.getSecureUrl(a);},sLogin:function(){MetaC.goSecure("/login");},sSignup:function(){MetaC.goSecure("/signup");},sSignupFB:function(){MetaC.goSecure("/signupfb");},sForgotPwd:function(){MetaC.goSecure("/forgot-password");},getOffsetPlus:function(a,d,b){if(typeof a==="string"){a=$(a);
}var c=a.offset();if(c){if(b){c.left+=b;}if(d){c.top+=d;}}return c;},checkOmniEvents:function(){var c=MetaC.Cookie.get("omniEvents");if(c!=null){if(window.om!=undefined){for(var a in c){if(c.hasOwnProperty(a)){var b=c[a];if(b>0){if(a=="trackLogin"){if(om.trackLogin){om.trackLogin({id:MetaC.Cookie.get("REMOTE_USER")});}}else{if(a=="trackReviewAdd"){if(om.trackReviewAdd){om.trackReviewAdd({rating:b});}}else{if(a=="trackRatingsAdd"){if(om.trackRatingsAdd){om.trackRatingsAdd({rating:b});}}}}}}}MetaC.Cookie.remove("omniEvents",".metacritic.com");
MetaC.Cookie.remove("omniEvents");}}},setOmniEvent:function(a,b){MetaC.Cookie.save("omniEvents["+a+"]",b,1,null,".metacritic.com");},showtimeEvent:function(b,c,a){if(window.om!=undefined){if(window.om.trackShowtimeSearchClick!=undefined){if(b){om.trackShowtimeSearchClick({zipcode:b});}else{om.trackShowtimeSearchClick({latlong:c+";"+a});}}}},fixToElem:function(f,c){var e=$(f);var a=$(c);var d=e.css("top");var b=parseInt(d,10);$(window).on("scroll",function(){var g=e.height();var m=e.offset().top;var h=a.height();
var k=a.offset().top;if(h>g){var l=(m+g)-(k+h);if(l>0){var j=k+h-g;e.css("top",(j-$(document).scrollTop())+"px");}else{if(m<k){e.css("top",k-$(document).scrollTop());}}}});},innerLabelIf:function(a){if(!a||a.attr("type")=="hidden"){return;}var c=a.closest(".field");var b=$("label",c);var d=$.trim(a.val());if(d.length==0){b.show();}else{b.hide();}},dateStrToDate:function(a){var b=false;var c=a.split(" ").join(":").split("-").join(":").split(":");if(c.length==6){b=new Date(c[0],c[1]-1,c[2],c[3],c[4],c[5]);
}return b;},setUrlParam:function(h,c,a){if(!a){a=document.location.href;}var g=a.split("#");var b=g[0].replace("?","&").split("&");var d=null;if(h.match("\\[\\]$")&&c===false){d=h.substr(0,h.length-1);}var e,j=[],k=[],m=false;for(var f=1;f<b.length;f++){e=b[f].split("=");if(e[0]==h||(d&&(e[0].indexOf(d)==0||e[0].indexOf(encodeURI(d))==0))){m=true;if(c!==false){j.push(h);k.push(c?"="+c:"");}}else{j.push(e[0]);k.push(e[1]?"="+e[1]:"");}}if(!m){if(c!==false){j.push(h);k.push(c?"="+c:"");}}var l=b[0];
for(f=0;f<j.length;f++){l+=(f==0?"?":"&");l+=j[f]+k[f];}l+=g[1]?"#"+g[1]:"";return l;},displayAds:function(){if(MetaC.adsDisplayed){return;}MetaC.adsDisplayed=true;MetaC._pushAdsWithLightSpeed(window.metac_ads_pushdisplay,googletag.pubads().getSlots());},_pushAdsWithLightSpeed:function(b,c){if(b){if(typeof index_headertag_lightspeed!=="undefined"){var a=function(){index_headertag_lightspeed.set_slot_targeting(c);MetaC._pushGoogleDisplay(b);};index_headertag_lightspeed.add_session_end_hook(a,true);
index_headertag_lightspeed.refresh();}else{MetaC._pushGoogleDisplay(b);}}},_pushGoogleDisplay:function(a){$.each(a,function(b,c){googletag.cmd.push(function(){googletag.display(c);});});},_refreshWithLightSpeed:function(b){if(b){var c=[];$.each(b,function(d,e){if(e.hasOwnProperty("varname")){c.push(window[e.varname]);}else{if(typeof e==="string"){c.push(window["metac_g_ad_"+e]);}else{c.push(e);}}});if(typeof index_headertag_lightspeed!=="undefined"){var a=function(){index_headertag_lightspeed.set_slot_targeting(c);
MetaC._pushGoogleRefresh(c);};index_headertag_lightspeed.add_session_end_hook(a,true);index_headertag_lightspeed.refresh();}else{MetaC._pushGoogleRefresh(c);}}},_pushGoogleRefresh:function(b){var a=b;googletag.cmd.push(function(){googletag.pubads().refresh(a);});},getUrlParam:function(a){var b=new RegExp("[?&]"+a+"=([^&#]*)").exec(window.location.href);if(b==null){return null;}else{return b[1]||0;}},isEDT:function(b){var a=new Date(b.getFullYear(),2,1);a=Date.UTC(a.getUTCFullYear(),2,14-(a.getUTCDay()+13)%7,5);
var c=new Date(b.getFullYear(),10,1);c=Date.UTC(c.getUTCFullYear(),10,7-(c.getUTCDay()+6)%7,4);return b.getTime()>=a&&b.getTime()<c;},handleGooglePageView:function(){var c=0;var a=MetaC.Cookie.get("metapv");if(a){a=parseInt(a,10);if(!isNaN(a)){c=a;}}c++;var b=new Date();var d=MetaC.isEDT(b)?4:5;var e=Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),d);if(e<=b.getTime()){e=Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),d+24);}MetaC.Cookie.save("metapv",c,new Date(e));return c;
},adSession:function(){if(MetaC._session==null){MetaC.processSession();}return MetaC._session;},adSubses:function(){if(MetaC._subses==null){MetaC.processSession();}return MetaC._subses;},processSession:function(){var a=MetaC.Cookie.get("mc_s_s");if(a){var b=a.split("_");if(b.length==2){MetaC._session=b[0];MetaC._subses=b[1];}}if(MetaC._session==null){var c=["a","b","c","d"];var e=MetaC.rndInt(0,3);MetaC._session=c[e];}if(MetaC._subses==null){MetaC._subses=MetaC.rndInt(1,4)+"";a=MetaC._session+"_"+MetaC._subses;
MetaC.Cookie.save("mc_s_s",a);}var f=MetaC.getUrlParam("adSession");if(f){MetaC._session=f;}var d=MetaC.getUrlParam("adSubses");if(d){MetaC._subses=d;}},rndInt:function(b,a){return Math.floor(Math.random()*(a-b+1))+b;},inViewport:function(d){var c=$(window);var e=d.offset().top;var b=e+d.outerHeight();var a=c.scrollTop();var f=a+c.height();return b>a&&e<f;},targetExtLinks:function(a){if(a){a.find('a:not([href*="metacritic.com"]):not([href^="#"]):not([href^="/"])').attr("target","_blank");}}};MetaC.clickEventName="click";
if(navigator.userAgent.match(/iPad/i)!=null){MetaC.clickEventName="touchstart";MetaC.isIPad=true;}function ajax_busy(f,b){if($("#ajax_bizzy_icon").length==0){var d=Math.floor($(window).scrollLeft()+$(window).width()/2);var c=Math.floor($(window).scrollTop()+$(window).height()/2);if(Array.isArray(f)&&f.offset){var g=f.offset();d=g.left+f.width()/2;c=g.top+f.height()/2;}else{if(typeof f=="object"){if(f.left){d=f.left;}if(f.top){c=f.top;}if(typeof f.pageX!="undefined"&&f.pageX!=0){d=f.pageX;}if(typeof f.pageY!="undefined"&&f.pageY!=0){c=f.pageY;
}}}var a="z-index:5011000;position:absolute;";a+="left:"+d+"px;";a+="top:"+c+"px;";if(b){a+="width:20px;";}$("body").append('<img id="ajax_bizzy_icon" style="'+a+'" src="https://static.metacritic.com/images/icons/ajax_busy.gif"/>');}}function ajax_done(){$("#ajax_bizzy_icon").remove();}MetaC.URS={_urs:null,appId:null,dev:false,config:function(b,a){MetaC.URS.appId=b;MetaC.URS.dev=a;},init:function(){if(MetaC.URS._urs==null&&MetaC.URS.appId&&window.URS){MetaC.URS._urs=URS.newInstance({appId:MetaC.URS.appId,version:"v2.2",clientToken:"434d677bcb494edb",environment:(MetaC.URS.dev)?URS.ursEnvironments.QA:URS.ursEnvironments.LIVE});
MetaC.URS._urs.common.addEventListener(URS.events.AUTH_SUCCESS,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.AUTH_FAILED,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.AUTH_FAILED_NO_LINK,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.AUTH_FAILED_NO_SUCH_USER,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.AUTH_FAILED_INVALID_USER,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.HANDSHAKE_FAILURE,MetaC.URS.responseHandler);
MetaC.URS._urs.common.addEventListener(URS.events.GENERAL_SERVER_ERROR,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.AUTH_FAILED_MISSING_REQUIRED_FIELDS,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.EXPIRED_ACCESS_TOKEN,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.USERNAME_CHECK_TAKEN,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.USERNAME_CHECK_ERROR,MetaC.URS.responseHandler);
MetaC.URS._urs.common.addEventListener(URS.events.EMAIL_CHECK_TAKEN,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.INVALID_SESSION_DETECTED,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.LINK_SUCCESS,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.LINK_FAILED,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.LINK_ERROR,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.UNLINK_SUCCESS,MetaC.URS.responseHandler);
MetaC.URS._urs.common.addEventListener(URS.events.UNLINK_FAILED,MetaC.URS.responseHandler);MetaC.URS._urs.common.addEventListener(URS.events.UNLINK_ERROR,MetaC.URS.responseHandler);}},responseHandler:function(c,b){var a=c.type;if(b.hasErrors()){if(MetaC.URS.dev&&window.console&&window.console.log){var d=b.getErrors();$.each(d,function(e,f){console.log(a+" : "+f.getApplicationCode()+" : "+f.getMessage());});}}$("body").trigger("MetaC_URS_EVENT",[a,b]);},getFirstErrorCode:function(b){if(b){if(b.hasErrors()){var c=b.getErrors();
if(c){var a=c[0];if(a){return a.getApplicationCode();}}}}return null;},getFirstErrorMsg:function(b){if(b){if(b.hasErrors()){var c=b.getErrors();if(c){var a=c[0];if(a){return a.getMessage();}}}}return null;},authFB:function(a){MetaC.URS.init();if(MetaC.URS._urs){if(a){var d=a;var c=function(g,f){var e=g.type;d(e,f);MetaC.URS._urs.common.removeEventListener(URS.events.AUTH_SUCCESS,b);MetaC.URS._urs.common.removeEventListener(URS.events.AUTH_FAILED,b);MetaC.URS._urs.common.removeEventListener(URS.events.AUTH_FAILED_NO_LINK,b);
MetaC.URS._urs.common.removeEventListener(URS.events.AUTH_FAILED_NO_SUCH_USER,b);MetaC.URS._urs.common.removeEventListener(URS.events.AUTH_FAILED_INVALID_USER,b);MetaC.URS._urs.common.removeEventListener(URS.events.AUTH_FAILED_MISSING_REQUIRED_FIELDS,b);};var b=c;MetaC.URS._urs.common.addEventListener(URS.events.AUTH_SUCCESS,c);MetaC.URS._urs.common.addEventListener(URS.events.AUTH_FAILED,c);MetaC.URS._urs.common.addEventListener(URS.events.AUTH_FAILED_NO_LINK,c);MetaC.URS._urs.common.addEventListener(URS.events.AUTH_FAILED_NO_SUCH_USER,c);
MetaC.URS._urs.common.addEventListener(URS.events.AUTH_FAILED_INVALID_USER,c);MetaC.URS._urs.common.addEventListener(URS.events.AUTH_FAILED_MISSING_REQUIRED_FIELDS,c);MetaC.URS._urs.social.authenticate(URS.social.sites.FACEBOOK);}else{MetaC.URS._urs.social.authenticate(URS.social.sites.FACEBOOK);}return true;}return false;},newFBUser:function(b,d,a){MetaC.URS.init();if(MetaC.URS._urs){var c={userName:b};if(d){c.option="e631:INTERNAL_NEWSLETTER";}if(a){c.email=a;}MetaC.URS._urs.social.authenticate(URS.social.sites.FACEBOOK,true,c);
return true;}return false;},linkFB:function(){MetaC.URS.init();if(MetaC.URS._urs){MetaC.URS._urs.social.link(URS.social.sites.FACEBOOK);return true;}return false;},unlinkFB:function(){MetaC.URS.init();if(MetaC.URS._urs){MetaC.URS._urs.social.unlink(URS.social.sites.FACEBOOK);return true;}return false;},logoutFB:function(){MetaC.URS.init();if(MetaC.URS._urs){MetaC.URS._urs.social.logout(URS.social.sites.FACEBOOK);return true;}return false;}};MetaC.Cookie={save:function(d,f,b,g,e){g=g?g:"/";var a="";
var h="";if(b){if(b.toUTCString){c=b;}else{var c=new Date();c.setTime(c.getTime()+(b*60*60*1000));}a="; expires="+c.toUTCString();}if(e){h=";domain="+e;}document.cookie=d+"="+f+a+h+"; path="+g;},get:function(a){var d=a+"=";var j=a+"[";var e=document.cookie.split(";");var k=null;for(var f=0;f<e.length;f++){var g=e[f];while(g.charAt(0)==" "){g=g.substring(1,g.length);}if(g.indexOf(d)==0){return g.substring(d.length,g.length);}else{if(g.indexOf(j)==0){var b=g.indexOf("]=");var h=g.substring(j.length,b);
if(k==null){k={};}k[h]=g.substring(b+2,g.length);}}}return k;},remove:function(a,c){var b=MetaC.Cookie.get(a);if((!!b)&&(b.constructor===Object)){for(var d in b){MetaC.Cookie.save(a+"["+d+"]","999",-1,null,c);}}else{MetaC.Cookie.save(a,"",-1,null,c);}},ilParse:function(a){a=a.replace(/\+/g,"%20");a=decodeURIComponent(a);return JSON.parse(a);}};MetaC.FB={initialized:function(){FB.Event.subscribe("edge.create",function(a,b){if(window.om!=undefined&&om.trackSocialClick){om.trackSocialClick({id:"2"});
}});$("body").trigger("MetaC_fbinit");$(document).on("click",".sharing-facebook",function(b){var a=$(this);FB.ui({method:"share_open_graph",action_type:"og.likes",action_properties:JSON.stringify({object:a.data("mcSocialUrl")})},function(c){if(window.om!=undefined&&om.trackSocialClick){om.trackSocialClick({id:"2"});}});});},login:function(b){var a=b;FB.login(function(c){var d=false;if(c.authResponse){d=true;}else{}if(a){a(d);}},{scope:"email"});},isLoggedIn:function(b){var a=b;FB.getLoginStatus(function(c){var d=(c.status==="connected");
if(a){b(d);}});},logout:function(b){var a=b;FB.getLoginStatus(function(c){if(c.status==="connected"){FB.logout(function(d){if(a){a();}});}else{if(a){a();}}});return true;},hasPerm:function(b,c){var a=c;FB.api("/me/permissions",function(e){var d=false;if(e.data&&e.data.length>0){var f=e.data[0];d=(f[b]==1);}if(a){a(d);}});}};MetaC.Twitter={initialized:function(){twttr.events.bind("tweet",function(a){if(window.om!=undefined&&om.trackSocialClick){om.trackSocialClick({id:"8"});}});$("body").trigger("MetaC_twttrinit");
}};MetaC.Progress={show:function(a){a=MetaC.Progress.findProg(a);if(a&&a.children){a.children(".fa-spinner").addClass("fa-spin");a.css("visibility","visible");}},hide:function(a){a=MetaC.Progress.findProg(a);if(a&&a.children){a.children(".fa-spinner").removeClass("fa-spin");a.css("visibility","hidden");}},findProg:function(a){if(a){if(!a.hasClass("progress")){a=a.find(".progress");}}return a;}};MetaC.Select={optionEventName:MetaC.clickEventName+".mcsoption",keyEventName:"keydown.mcskey",init:function(){var b=MetaC.Select;
var a=$(".styled_select");a.on(MetaC.clickEventName,function(d){var e=$(this);if(e.hasClass("opened")){MetaC.Select.close(e);}else{var c=a.filter(".opened").not(this);c.each(function(f){MetaC.Select.close($(this));});MetaC.Select.open(e);}return false;});b.closeAll=function(){a.each(function(c){MetaC.Select.close($(this));});};a.each(function(c){var d=$(this);d.find(".option").on(MetaC.Select.optionEventName,function(e){if(d.hasClass("opened")){MetaC.Select.select($(this));e.stopPropagation();return false;
}});});},open:function(a){var b=a.find(".option.selected");a.data("mcqwval",b.data("mcqwval"));$(window).one(MetaC.Select.optionEventName,function(){MetaC.Select.close(a);}).on(MetaC.Select.keyEventName,function(g){var c=MetaC.Select;var e=a.find(".option.selected");var d=a.find(".option");var f=g.which||g.keyCode||g.charCode;var h=null;if(f==27||f==9){return c.close(a);}else{if(f==13||f==32){return c.select(e);}else{if(f==35){h=d.last();}else{if(f==36){h=d.first();}else{if(f==38){h=e.prev();}else{if(f==40){h=e.next();
}}}}}}if(h){if(h.length>0){d.removeClass("selected");h.addClass("selected");a.find(".options_scroll").scrollTop(h.position().top-h.height());}return false;}});a.addClass("opened");},close:function(a){$(window).off(MetaC.Select.optionEventName).off(MetaC.Select.keyEventName);a.removeClass("opened");},select:function(c){var a=c.parents(".styled_select");var b=a.find(".option");var d=a.data("mcqwval");var e=c.data("mcqwval");if(d!=e){b.removeClass("selected");c.addClass("selected");a.trigger("change");
}MetaC.Select.close(a);return false;},getSelectedValue:function(b){var a=b.find(".option.selected");return a.data("mcqwval");}};MetaC.Select2={optionEventName:MetaC.clickEventName+".mcsoption2",keyEventName:"keydown.mcskey2",mainClass:".styled_select2",init:function(){var a=MetaC.Select2;var b=$(a.mainClass);a.fixWidth=function(c){var e=c.find(".topper");var d=c.find(".options_scroll");e.width(d.width());d.css("position","absolute");};b.each(function(d){var c=$(this);a.fixWidth(c);});a.close=function(c){$(window).off(a.optionEventName).off(a.keyEventName);
c.removeClass("expanded");};a.closeAll=function(){b.each(function(c){a.close($(this));});};b.on(MetaC.clickEventName,".topper",function(c){var e=$(this);var d=e.closest(a.mainClass);d.toggleClass("expanded");if(d.hasClass("expanded")){c.stopPropagation();$(window).one(a.optionEventName,function(){a.closeAll();}).on(a.keyEventName,function(j){var g=d.find(".option.selected");var f=d.find(".options").children(".option");var h=j.which||j.keyCode||j.charCode;var k=null;if(h==27||h==9){return a.close(d);
}else{if(h==13||h==32){g.trigger(MetaC.clickEventName);return false;}else{if(h==35){k=f.last();}else{if(h==36){k=f.first();}else{if(h==38){k=g.prev();}else{if(h==40){k=g.next();}}}}}}if(k){if(k.length>0){f.removeClass("selected");k.addClass("selected");d.find(".options_scroll").scrollTop(k.position().top-k.height());}return false;}});}});b.on(MetaC.clickEventName,".option",function(e){var d=$(this);var f=d.closest(a.mainClass);var c=f.find(".options").children(".option");c.removeClass("selected");
d.addClass("selected");f.find(".disp_selected .text").text(d.find(".option_text").text());f.trigger("change");a.close(f);});}};MetaC.Nav={hoverTimer:null,init:function(){var a=MetaC.Nav;a.topHeader=$("#top_header");a.primaryNavs=$(".primary_nav_text");a.primaryNavs.on("mouseenter",function(){a.cancelTimer();var b=$(this).parents(".primary_nav_item");a.show(b);}).on("mouseleave",function(){a.cancelTimer();a.hoverTimer=setTimeout(function(){a.hide();},500);});$(".primary_drop_down").on("mouseenter",function(){a.cancelTimer();
}).on("mouseleave",function(){a.cancelTimer();a.hoverTimer=setTimeout(function(){a.hide();},200);});},cancelTimer:function(){var a=MetaC.Nav;if(a.hoverTimer){clearTimeout(a.hoverTimer);a.hoverTimer=null;}},show:function(b){var a=MetaC.Nav;if(!b){return;}var c=b.find(".primary_drop_down");if(c.length>0){setTimeout(function(){a.topHeader.addClass("dropped");$(".primary_drop_down").removeClass("dropped");c.addClass("dropped");},200);}else{a.hide();}},isShowing:function(){var a=MetaC.Nav;return a.topHeader.hasClass("dropped");
},hide:function(){var a=MetaC.Nav;$(".primary_drop_down").removeClass("dropped");a.topHeader.removeClass("dropped");}};MetaC.NavSearch={init:function(){var h=MetaC.NavSearch;var b=$("#primary_search");var l=$("#top_header");var k=$("#primary_search_box");var j=$("#primary_search_results");var g=null;var c=null;var f=null;var a=false;var e=6;var d=[150,30,310,70,170,470];$("#primary_menu_item_enter_search").on(MetaC.clickEventName,function(m){b.find("form").submit();});j.on("mousedown touchstart",".search_results_item",function(m){MetaC.setOmniEvent("pageFindingMethod","Internal:Search");
var n=$(this);if(n.hasClass("all")){if(window.om&&om.trackSearchSuggestClick){om.trackSearchSuggestClick({term:g,trackSuggestedClick:"allResults"});}b.find("form").submit();}else{if(window.om&&om.trackSearchSuggestClick){om.trackSearchSuggestClick({term:g,trackSuggestedClick:"suggestedResult"});}}});k.on("focus",function(m){l.addClass("searching");$(window).on(MetaC.clickEventName+".navSearch",function(n){if($.contains(b[0],n.target)){return true;}h.hide();return false;});if(g){h.show();}}).on("keypress",function(m){if(m.which!==0&&m.charCode!==0&&!m.ctrlKey&&!m.metaKey&&!m.altKey){var n=String.fromCharCode(m.which);
g=k.val()+n;h.search(g);}}).on("keyup",function(m){if(g!=k.val()&&(c==null||c!=k.val())){g=k.val();h.search(g);}}).on("keydown",function(n){if(n.keyCode==40){h.move();}else{if(n.keyCode==38){h.move(true);}else{if(n.keyCode==13){var m=j.find(".selected");if(m.length==1&&m.attr("href")){if(window.om&&om.trackSearchSuggestClick){om.trackSearchSuggestClick({term:g,trackSuggestedClick:"suggestedResult"});}window.location.href=m.attr("href");}else{if(window.om&&om.trackSearchSuggestClick){om.trackSearchSuggestClick({term:g,trackSuggestedClick:"allResults"});
}b.find("form").submit();}return false;}else{if(n.keyCode==27){k.blur();}}}}});h.search=function(n){var m=$.trim(n);if(m!=""){if(f){f.abort();f=null;}var o={search_term:m,image_size:98};if(a){o.search_each=1;}h.lastPost=$.post("/autosearch",o,function(v){var z=false;if(v&&v.autoComplete){var z=null;if(a){z=v.autoComplete.results;}else{z=v.autoComplete;}if(z&&z.length>0){if(m==$.trim(k.val())){var u="";var E=new RegExp("("+m+")","i");var q=null;var x=0;for(var w=0;w<z.length&&x<e;w++){var p=z[w];if(p&&p.url&&p.name){var B=p.refTypeId;
if(!a||q!=B){var D="";if(d.indexOf(B)!=-1){if(p.scoreWord&&p.metaScore){D='<span class="metascore_w score_'+p.scoreWord+'">'+p.metaScore+"</span>";}else{D='<span class="metascore_w tbd">tbd</span>';}}var y=p.name;var A=y.replace(E,"<b>$1</b>");if(B==170){var t=y.split(" - ");if(t.length>1){y=t[0];}}var s=p.refType?p.refType:null;var C=p.itemDate?p.itemDate:null;var r='<a class="search_results_item" href="'+p.url+'">';r+=D;r+='<span class="title" data-mctitle="'+y+'">'+A+"</span>";if(s){r+='<span class="type secondary">'+s+"</span>";
}if(s&&C){r+='<span class="separ secondary">,</span>';}if(C){r+='<span class="date secondary">'+C+"</span>";}r+="</a>";u+=r;q=B;x++;}}}u+='<div class="search_results_item all"><span>See all results for</span><span class="all_search_term">'+m+'</span><span class="secondary">&gt;</span></div>';h.show();j.html(u);}}else{j.html('<div class="search_no_results">No results found.</div.');}}});}};h.show=function(){j.show();l.addClass("dropped");};h.hide=function(){$(window).off(MetaC.clickEventName+".navSearch");
l.removeClass("searching");j.hide();l.removeClass("dropped");};h.move=function(m){var o=j.find(".selected");if(o.length==0){var n=j.find(".search_results_item");if(n.length>0){if(m){o=$(n[n.length-1]);}else{o=$(n[0]);}}}else{o.removeClass("selected");if(m){o=o.prev();}else{o=o.next();}}if(o.length==0){k.val(g);c=null;}else{o.addClass("selected");if(o.hasClass("all")){c=g;}else{c=o.find(".title").data("mctitle");}k.val(c);}};}};MetaC.UserReview={_deleteChoiceHtml:'<div class="delete_choice"><div class="delete_confirm"><span>Would you like to delete this review?</span><i class="fa fa-check-circle" aria-hidden="true"></i></div><div class="delete_cancel"><span>Cancel</span><i class="fa fa-times-circle" aria-hidden="true"></i></div></div>',_deleteDoneHtml:'<div class="delete_done">This review has been deleted! Thanks.</div>',init:function(){var a=MetaC.UserReview;
$(".de_wrapper .delete_start").on("click",function(){var b=$(this);b.closest(".button_wrapper").hide();a.deleteStart(b);});$(".de_wrapper").on("click",".delete_confirm",function(){a.deleteConfirm($(this));}).on("click",".delete_cancel",function(){a.deleteCancel($(this));});a.deleteStart=function(b){var c=a.getReviewObj(b);var d=a.getReviewId(c);if(d){var e=a.getWrapperObj(b);e.append(a._deleteChoiceHtml);e.find(".delete_choice").css("height",c.outerHeight());c.css("overflow","hidden");}};a.deleteConfirm=function(b,d){var g=b;
var c=a.getReviewObj(b);var e=a.getReviewId(c);if(e){var h=b.closest(".user_reviews").find('[name="csrf"]');var f=h.val();$.post("/_ua/ajxact",{ajxact:"delrev",csrf:f,rid:e},function(j){if(j.csrf){if(h.length>0&&!d){h.val(j.csrf);setTimeout(function(){a.deleteConfirm(g,true);},1);}}else{var k=a.getWrapperObj(b);k.find(".delete_choice").remove();k.append(a._deleteDoneHtml);k.find(".delete_done").css("height",c.height()+10);if(j.success){}else{k.find(".delete_done").text("Please try again later.");
}}});}};a.deleteCancel=function(b){var c=a.getWrapperObj(b);c.find(".delete_choice").remove();c.find(".button_wrapper").show();};a.getReviewObj=function(b){var c=[];if(b){c=b.closest(".review_content");if(c.length==0){c=b.closest(".review");}}return c;};a.getWrapperObj=function(b){if(b){return b.closest(".de_wrapper");}return[];};a.getReviewId=function(b){if(b){return b.data("mcrid");}return null;};}};MetaC.Newsletter={_signupHtml:'<div id="popup_newslettter"><div class="close"><i class="fa fa-times" aria-hidden="true"></i><i class="fa fa-angle-double-right" aria-hidden="true"></i></div><div class="stuff"><div class="title">Sign-up for the Weekly Metacritic Movie Newsletter Now.</div><input type=hidden name="cid" value="a6518716d26c510c026a1f2c4c2c0896"><span class="field innerLabel"><label for="email">your.name@email.com</label><input type="text" name="email" class="field_input email" autocomplete="off"></span><button type="button">Sign Me Up!</button><div class="msg"></div></div></div>',init:function(){return;
if(!MC_LOCAL_STORE.test()){return;}var a=MetaC.Newsletter;var f=$('[name="csrf_newsletter"]');if(f.length==0){return;}var d=$("#page");if(d.length==0){d=$("#main_content");}if(d.length>0){var c=MC_LOCAL_STORE.get("mc_newsletter");if(c=="2"){return;}var b=null;var e=$("#articlebody");$(window).on("scroll.newsletters",function(){if(e.length==0){$(window).off("scroll.newsletters");}else{if($(window).scrollTop()>(e.height()/2)){$(window).off("scroll.newsletters");}else{return true;}}d.append(a._signupHtml);
b=$("#popup_newslettter");if(c=="1"){b.addClass("smaller");}setTimeout(function(){b.addClass("make_vis");},100);b.find("button").on("click",function(){a.signUp();});b.find("input.email").on("keypress",function(h){var g=h.which||h.keyCode||h.charCode;if(g==13){a.signUp();return false;}return true;});b.find(".close").on("click",function(){b.toggleClass("smaller");c=MC_LOCAL_STORE.get("mc_newsletter");if(c!="2"){c="1";MC_LOCAL_STORE.save("mc_newsletter",c);}});});a.signUp=function(h){var j=f.val();var g=b.find(".email").val();
$.post("/thenewsletter",{newsletter:1,csrf:j,email:g},function(k){var m=false;if(k.csrf){if(f.length>0&&!h){f.val(k.csrf);setTimeout(function(){a.signUp(true);},1);}}else{if(k.bh&&k.bh.msg){var l=k.bh.msg;m=k.bh.success;b.find(".msg").show().text(l);}else{b.find(".msg").show().text("Please try again later.");}}if(m){setTimeout(function(){b.addClass("smaller");},3000);c="2";MC_LOCAL_STORE.save("mc_newsletter",c);}});};}}};MetaC.Settings={errorClass:"field_error",successClass:"field_success",lastUsername:"",usernameTimer:null,setFieldError:function(e,c,a,d){var b=$(".field."+e,a);
b.removeClass(MetaC.Settings.successClass);b.addClass(MetaC.Settings.errorClass);$(".field_feedback",b).html(c);if(d===undefined||d!=true){$('[name="'+e+'"]').blur().focus();}},setFieldSuccess:function(d,a,b){var c=$(".field."+d,b);c.removeClass(MetaC.Settings.errorClass);c.addClass(MetaC.Settings.successClass);$(".field_feedback",c).text(a);},clearErrors:function(a){$(".field_error",a).removeClass(MetaC.Settings.errorClass);$(".field_success",a).removeClass(MetaC.Settings.successClass);$(".field_feedback",a).text("");
$(".form_feedback",a).text("");},requireValue:function(d,c,b){var a=$("[name='"+d+"']",b).val();if($.trim(a)==""){MetaC.Settings.setFieldError(d,c,b);return null;}return a;},checkUsername:function(b,d){MetaC.Settings.clearErrors(b);var c=MetaC.Settings.requireValue("userName","Please provide a display name.");if(c==null){return false;}var a=d;MetaC.Settings._checkUsername(c,function(f,e){if(f){MetaC.Settings.setFieldSuccess("userName",e);}else{MetaC.Settings.setFieldError("userName",e);}if(a){a(f);
}});return true;},_checkUsername:function(c,b){var a=b;$.post("/signup",{check_username:1,userName:c},function(d){if(a){var f=(d.successes&&d.successes.username!=null);var e="Unable to check username.  Try again later.";if(f){e=d.successes.username;}else{if(d.errors&&d.errors.username){e=d.errors.username;}}a(f,e);}});return true;},checkChangePwd:function(d,e){MetaC.Settings.clearErrors(d);if(!e){var c=MetaC.Settings.requireValue("current_password","Please provide your current password.");if(c==null){return false;
}}var b=MetaC.Settings.requireValue("new_password","Please provide a new password.");if(b==null){return false;}var a=MetaC.Settings.requireValue("new_confirm_password","Please confirm your new password.");if(a==null){return false;}if(b!=a){MetaC.Settings.setFieldError("new_password","The passwords entered do not match.");MetaC.Settings.setFieldError("new_confirm_password","The passwords entered do not match.");return false;}return true;},checkSignupPwd:function(b){MetaC.Settings.clearErrors(b);var a=MetaC.Settings.requireValue("password","Please provide a password.",b);
if(a==null){return false;}return true;},checkSignupEmailAndUsername:function(e,f){var h=e;MetaC.Settings.clearErrors(e);var d=MetaC.Settings.requireValue("csrf","",e);var g=MetaC.Settings.requireValue("userName","Please provide a display name.",e);if(g==null){return false;}var c=MetaC.Settings.requireValue("email","Please provide a valid email address.",e);if(c==null){return false;}var b=MetaC.Settings.requireValue("emailConf","Please confirm your email address.",e);if(b==null){return false;}if(c!=b){MetaC.Settings.setFieldError("email","The email addresses entered do not match.",e);
MetaC.Settings.setFieldError("emailConf","The email addresses entered do not match.",e);return false;}$("[name='email']",e).val($.trim(c));var a=f;$.post("/signup",{check_enu:1,email:c,userName:g,csrf:d},function(j){if(j.errors&&j.errors.email){MetaC.Settings.setFieldError("email",j.errors.email,h);}if(j.errors&&j.errors.username){MetaC.Settings.setFieldError("userName",j.errors.username);}if(a){a(j.errors==null);}});return true;},checkEmail:function(b){var c=b;MetaC.Settings.clearErrors(b);var a=MetaC.Settings.requireValue("email","Please provide a valid email address.",b);
if(a==null){return false;}$("[name='email']",b).val($.trim(a));return true;},checkSignup:function(a,b){if(!MetaC.Settings.checkSignupPwd(a)){return false;}MetaC.Settings.checkSignupEmailAndUsername(a,b);return false;},monitorUsername:function(e,g,f){var b=e;var a=g;var c=f;var d=$("[name='userName']",b);d.keyup(function(){MetaC.Settings.cancelUsernameTimer();if(d.val().length>0&&d.val()!=MetaC.Settings.lastUsername){MetaC.Settings.usernameTimer=setTimeout(function(){if(c){c(d.val());}MetaC.Settings.lastUsername=d.val();
var h=d.val();MetaC.Settings._checkUsername(MetaC.Settings.lastUsername,function(k,j){if(h==d.val()){if(k){MetaC.Settings.setFieldSuccess("userName",j);}else{MetaC.Settings.setFieldError("userName",j,null,true);}if(a){a(k);}}});},350);}});},cancelUsernameTimer:function(){if(MetaC.Settings.usernameTimer!=null){clearTimeout(MetaC.Settings.usernameTimer);}MetaC.Settings.usernameTimer=null;}};MetaC.Gallery2={_html:null,_slide:0,_pending:[],_count:0,_titles:[],_vguid:null,setSlideNo:function(a){MetaC.Gallery2._slide=a;
},showSlide:function(b,c){var a=MetaC.Gallery2;if(a._html){if(b>-1&&b<=a._count){a.waiting(true);setTimeout(function(){a._showSlide(b,c);a.waiting(false);},1000);}}else{if(b!=a._slide){a._pending.push(b);a.waiting(true);}}},waiting:function(a){var b=$("#theslides");if(a){b.addClass("waiting");b.find(".fa-spinner").addClass("fa-spin");}else{b.removeClass("waiting");b.find(".fa-spinner").removeClass("fa-spin");}},setCount:function(a){MetaC.Gallery2._count=a;},setTitles:function(a){MetaC.Gallery2._titles=a;
},initDT:function(){var j=MetaC.Gallery2;var d=$("#theslides");var p=$(".slide0");var m=$(".slidex");var b=$("#leader_top_wrapper");var h=$("#leader_top");var l=$("body");var e=false;var g=d.data("url");if(g){var c={gallery_data:1};if(window.MC_ISQA&&MetaC.getUrlParam("allvideos")){c.allvideos=1;}$.post(g,c,function(q){j._html=$("<div/>").append(q);while(j._pending.length){j._showSlide(j._pending.shift());}j.waiting(false);});}j._checkArrows=function(){var q=$(".slide_next");var r=$(".slide_prev");
if(j._slide==0){m.hide();p.show();d.addClass("first");}else{p.hide();m.show();d.removeClass("first");}if(j._slide>=j._count+1){d.addClass("last");}else{d.removeClass("last");}MetaC.targetExtLinks(m);};j._showSlide=function(r,u){if(r<0){r=0;}else{if(r>j._count){r=j._count;}}var w=(j._slide!=r);j.setSlideNo(r);var v=r<=j._titles.length?j._titles[r]:"";if(j._html){var t=j._html.find("#slide_"+r);if(t.length>0){var s=t.html();m.html(s);if(MetascoreW&&MetascoreW.process){MetascoreW.process(m);}}}if(w){if(j._pending.length==0){j.refreshAds();
j.trackPhoto(m,j._vguid);}if(!u){var q=g;if(r>0){q+="/"+r;}history.pushState({popType:"gallery2",slideNum:r},v,q);}}j._checkArrows();};j.nextSlide=function(){if(j._slide==j._count){window.location.href="/pictures/recommend";}else{j.showSlide(j._slide+1);}};j.prevSlide=function(){j.showSlide(j._slide-1);};j.refreshAds=function(){if(window.metac_ads_pushdisplay){if(j._slide==0){googletag.pubads().setTargeting("ptype","image_stub");}else{googletag.pubads().setTargeting("ptype","image_gallery");}var q=j._vguid=uuid.v1();
googletag.cmd.push(function(){googletag.pubads().setTargeting("vguid",q);var r=MetaC.handleGooglePageView();googletag.pubads().setTargeting("pv",r+"");MetaC._refreshWithLightSpeed(["leader_top","mpu_plus_top","mpu_bottom","leader_bottom","intromercial"]);});}};d.on(MetaC.clickEventName,".slide_image, .perm_arrows .slide_next",function(q){if($(q.target).closest(".slide_prev").length==0&&$(q.target).closest(".video_wrapper").length==0){j.nextSlide();}});d.on(MetaC.clickEventName,".slide_prev",function(){j.prevSlide();
});var o=null;d.on("mouseenter",".slidex .where_to_watch",function(q){if(o){clearTimeout(o);o=null;}$(this).addClass("expanded");}).on("mouseleave",".slidex .where_to_watch",function(q){var r=$(this);o=setTimeout(function(){r.removeClass("expanded");},250);});var k=false;var a=b.offset().top+b.height();$(window).on("scroll.floatingAd",function(s){if(j._pending.length==0){if(e){var q=$(window).scrollTop();var r=(a<=q);if(r){if(!l.hasClass("fixedAdTop")&&!MetaC.Nav.isShowing()){$(".floatAdWrapper").css("min-height",b.height());
l.addClass("fixedAdTopLoading");setTimeout(function(){l.addClass("fixedAdTop");l.removeClass("fixedAdTopLoading");},10);}}else{if(l.hasClass("fixedAdTop")){l.removeClass("fixedAdTop");}}}else{if(!e){if(b.find("div div iframe").length>0){a=b.offset().top+b.height();e=true;}}}}});var n=0;var f=setInterval(function(){if(window.om||n>6){clearInterval(f);j.trackPhoto(j._slide!=0?m:null,MC_UUID);}n++;},500);j._checkArrows();MetaC.targetExtLinks(p);},trackPhoto:function(b,e){var a=MetaC.Gallery2;var f=a._slide<=a._titles.length?a._titles[a._slide]:"Unknown";
var d={pageViewGuid:e,photoId:0,photoTitle:f};if(b&&a._slide>0){d.photoId=b.find(".slide_image").data("metaid");var c=b.find('[data-leadname="amazon"]');if(c.length>0){if(c.data("leadtype")=="Digital Subscription"){d.eventAmazonPivView=true;}else{d.eventAmazonBuyView=true;}}}if(window.om&&om.trackPhotoView){om.trackPhotoView(d);}}};$(document).ready(function(){if(MetaC.isIPad){var b=$("#page");if(b.length>0){b.addClass("iPad");}else{$("#site_layout").addClass("iPad");}}var a=".field.innerLabel input, .field.innerLabel textarea";
$(document).on("focus",a,function(){$(".field.selected").removeClass("selected");var c=$(this).closest(".field");c.addClass("selected");}).on("blur",a,function(){MetaC.innerLabelIf($(this));$(".field.selected").removeClass("selected");}).on("keydown",a,function(){MetaC.innerLabelIf($(this));}).on("keyup",a,function(){MetaC.innerLabelIf($(this));});$(a).each(function(c){MetaC.innerLabelIf($(this));});$(document).on("click","[data-leadname]",function(g){var j=$(this);var e=j.data("leadname");if(e){var c=j.data("leadtag");
if(!c){c=j.attr("href");}var f=window.om_lead_media;var d=j.data("mediaid");if(d){f={mediaId:d,mediaType:j.data("mediatype"),mediaTitle:j.data("mediatitle")};}if(!f){f={};}var h={leadMerchantName:e,leadMerchantId:j.data("leadid"),leadType:j.data("leadtype"),leadMerchantTag:c,leadPagePlacement:j.data("leadplace"),mediaType:f.mediaType,mediaId:f.mediaId,mediaTitle:f.mediaTitle};if(window.om!=undefined&&om.trackLeadClick){om.trackLeadClick(h);}}});$(document).on("click",".esite_btn table",function(g){var f=$(g.target);
var c=$(this);if(f.closest("a").length>0){}else{var d=c.find("a");if(d.length>0){d[0].click();}}});$(document).on("click",".banner_container",function(g){var f=$(g.target);var c=$(this);if(f.closest("a").length>0){}else{var d=c.find("a");if(d.length>0){d[0].click();}}});$(".piv_promo").on("click",function(){var d=$(this);var c=d.data("leadtag");window.open("http://www.amazon.com/gp/video/offers?tag="+c);});$(".promo_amazon").click(function(g){var f=$(g.target);var c=$(this);if(f.closest("a").length>0){}else{var d=c.find("a");
if(d.length>0){d[0].click();}}});$(".product_container a").on("click",function(c){var d=null;if(window.utag_data&&utag_data.productContainerId){d=utag_data.productContainerId;}if(window.om!=undefined&&om.trackProductContainerClick){om.trackProductContainerClick(d,this,"navigate");}return false;});$(".sitewide_promo a").on("click",function(e){var d=true;var c=null;if(window.utag_data&&utag_data.sitePromotionId){c=utag_data.sitePromotionId;}if(window.om!=undefined&&om.trackSitePromotionClick){var f=$(this);
if(f.attr("target")){om.trackSitePromotionClick(c,this);}else{d=false;om.trackSitePromotionClick(c,this,"navigate");}}return d;});$("[data-mc-social-track-id]").on("click",function(f){if(window.om!=undefined){var d=$(this);var c=d.data("mcSocialTrackId");if(c){if(om.trackSocialClick){om.trackSocialClick({id:c});}}}});$(".sharing-twitter").on("click",function(h){var g=$(this);if(g.attr("href")=="#"){var c=g.data("mcSocialUrl");var f=$.param({path:c,social:true});var d=window.open("about:blank","tweetwindow");
$.ajax({type:"POST",async:false,url:"/mcshorturl",data:f,success:function(j){if(j&&j.results){var e=j.results.shortened_url;if(!e){e=j.results.url;}if(e){var k=g.data("mcTweetPrefix");k+="&url="+e;d.location.href=k;g.attr("href",k);}else{d.close();}}}});return false;}else{return true;}});if(!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")){$("img[src$='.svg']").each(function(c){var d=$(this);d.attr("src",d.attr("src").replace(/.svg$/,".png"));});}$("a.toggle_expand_collapse").click(function(c){$(this).html($(this).hasClass("toggle_collapse")?"Expand":"Collapse");
$(this).toggleClass("toggle_collapse");$(this).parent().toggleClass("inline_expanded");$(this).parent().toggleClass("inline_collapsed");return false;});$(".review_body a.toggle_expand_collapse").click(function(f){var c=$(this).closest(".review_body");var d=c.children("strong");if(d.length>0){d.children(".toggle_text_visibility").toggle();}});$(".mc_play_trailer_btn").click(function(){var d=$(this).data("trailer-reftype");var c=$(this).data("trailer-refid");MetaC.PopInPlayer.playUrl(d,c);$(this).next(".load_pop_in_player").toggle();
});$("#mc_pop_in_video_wrapper .pop_in_close_btn").click(function(){if(MetaC.PopInPlayer.destroyPlaylist()!="undefined"){MetaC.PopInPlayer.destroyPlaylist();}$("#mc_pop_in_video_wrapper .pop_in_title").text("");$("#mc_pop_in_video_wrapper").css("display","none");});MetaC.Select.init();MetaC.Select2.init();MetaC.Nav.init();MetaC.NavSearch.init();MetaC.UserReview.init();MetaC.Newsletter.init();});MetaC.PopInPlayer={videoManager:null,custParams:[],managerReady:null,popVideoPlayer:null,playerReady:null,popInPlayerOnline:false,videoWrapper:$("#mc_pop_in_video_wrapper"),videoRating:null,videoData:null,init:function(){if(!window.uvpjs){console.log("uvpjs not found, player aborting");
return;}var a=MetaC.PopInPlayer;a.wrapperObj=$("#"+a.wrapperElemId);if(a.popInPlayerOnline){return;}else{a.popInPlayerOnline=true;}function d(){a.managerReady=true;console.log("manager ready");var f={enableUnmutedAutoplay:true,enableMutedAutoplay:true,previewImage:"/images/icons/dark_logo.png"};a.videoManager.createVideoPlayer("mcPopInVideoContainer",b,f);var g=a.videoData;if($("#mc_pop_in_video_wrapper").is(":hidden")){$("#mc_pop_in_video_wrapper").css("display","block");}$(".load_pop_in_player").css("display","none");
$("#mc_pop_in_video_wrapper .pop_in_title").text(g.title.substr(0,40-1)+(this.length>40?"&hellip;":""));}function c(f){console.log("Video manager error.",f);}function b(h){a.popVideoPlayer=h;a.playerReady=true;console.log("player ready");var f=a.videoData;if(f.agegate){var g=MetaC.Cookie.get("mc_ag");a.videoRating=f.rating;if(g!="1"){a.ageGate.addClass("warning");return;}}a.startAssociatedVideo();}function e(){var f=a.videoData;if(!a.playerContextSet){if(window.utag_data&&a.popVideoPlayer.setPageContextMetadata){var g={sitePrimaryRsid:"cbsimetacriticsite",deviceType:utag_data.deviceType,siteType:utag_data.siteType,pageType:utag_data.pageType,siteSection:utag_data.siteSection,userState:utag_data.userState,userType:utag_data.userType,test:utag_data._test,};
a.popVideoPlayer.setPageContextMetadata(g);}a.playerContextSet=true;}var j="www.metacritic.com";var h="&iu=/8264/vaw-metacritic/desktop/metacritic&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url=[referrer_url]&description_url=[description_url]&correlator=[timestamp]&cust_params=";if(window.MC_ISMOBILE){h="&iu=/8264/vaw-metacritic/mobile_web/metacritic_mobile&ciu_szs=300x60,300x250&impl=s&gdfp_req=1&env=vp&output=vast2&unviewed_position_start=1&url=[referrer_url]&description_url=www.metacritic.com&correlator=[timestamp]&cust_params=";
}if(window.utag_data){h+=encodeURIComponent("&ptype=")+window.utag_data.pageType+"";}if(window.utag_data){h+=encodeURIComponent("&id=")+f.id+"";}if(window.utag_data){h+=encodeURIComponent("&title=")+f.title+"";}return h;}a.playUrl=function(f,g){if(a.popVideoPlayer){a.popVideoPlayer.destroyPlaylist();}if(a.videoManager){a.videoManager.destroy();}var h={ref_type_id:f,ref_id:g,"default":true};$.post("/_video/get-videos",h,function(k){var j=k.videos[0];if(!j){console.log("no trailer data received");return;
}if(!j.hasOwnProperty("title")||!j.hasOwnProperty("url")){console.log("trailer data missing info");return;}if(!j.url.length>10){console.log("trailer data missing url");return;}a.videoData=j;var l={partner:"metacritic",usesIMA:true,enableReplay:true,uvpc:"/js/video/metacritic.xml",skin:true,playsInline:true};if(a.wrapperObj.data("mctrailerimg")){l.previewImage=a.wrapperObj.data("mctrailerimg");}a.videoManager=new uvpjs.VideoManager();a.videoManager.initialize(l,d,c);});};a.startAssociatedVideo=function(){if(!a.playerContextSet){if(window.utag_data&&a.popVideoPlayer.setPageContextMetadata){var h={sitePrimaryRsid:"cbsimetacriticsite",deviceType:utag_data.deviceType,siteType:utag_data.siteType,pageType:utag_data.pageType,siteSection:utag_data.siteSection,userState:utag_data.userState,userType:utag_data.userType,test:utag_data._test,};
var f=a.wrapperObj.data("mcproductid");if(f!=null){h.productID=f;}else{if(utag_data.movieId){h.productID=utag_data.movieId;}else{if(utag_data.gameId){h.productID=utag_data.gameId;}else{if(utag_data.showId){h.productID=utag_data.showId;}}}}a.popVideoPlayer.setPageContextMetadata(h);}a.playerContextSet=true;}var g=a.videoData;var j="https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/8264/vaw-metacritic/desktop/metacritic&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url=[referrer_url]&description_url=[description_url]&correlator=[timestamp]";
if(window.MC_ISMOBILE){j="https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/8264/vaw-metacritic/mobile_web/metacritic_mobile&ciu_szs=300x60,300x250&impl=s&gdfp_req=1&env=vp&output=vast2&unviewed_position_start=1&url=[referrer_url]&description_url=www.metacritic.com&correlator=[timestamp]";}j+="&cust_params=";if(window.utag_data){j+=encodeURIComponent("&ptype=")+window.utag_data.pageType+"";}console.log("page type "+window.utag_data.pageType);if(window.utag_data){j+=encodeURIComponent("&movieId=")+window.utag_data.movieId+"";
}var k={vidContId:"mcPopInVideoContainer",type:uvpjs.mediaCapabilities.RP_IMA,adCall:j,videoTitle:g.title,assetURL:g.url};a.popVideoPlayer.loadAndPlayResource(k);};a.destroyPlaylist=function(){if(a.popVideoPlayer){a.popVideoPlayer.destroyPlaylist();a.videoManager.destroy();}else{a.videoManager.destroy();}};a.ageGate=$("#mc_pop_in_video_wrapper .agegate");a.ageGate.on(MetaC.clickEventName,".ag_button",function(){var h=17;if(a.videoData.rating=="13"){h=13;}var f=Number(a.ageGate.find(".year").val())+h;
var g=new Date(f,a.ageGate.find(".month").val()-1,a.ageGate.find(".day").val());if(g.getTime()>new Date().getTime()){a.ageGate.find(".msg").show();}else{MetaC.Cookie.save("mc_ag","1");a.ageGate.removeClass("warning");a.startAssociatedVideo();}});}};function renderAdCallback(c){var b=1;if(c&&c.isIntromercial&&!c.isBlank){if(c.isIntromercialOpen){MetaC.Video.setHoldAutoplay(true);if(!MetaC.Video.pause()){var a=setInterval(function(){if(MetaC.Video.pause()){clearInterval(a);}},10);setTimeout(function(){clearInterval(a);
},15000);}}else{if(c.isIntromercialOpen===false){MetaC.Video.setHoldAutoplay(false);if(MetaC._utagAutoPlay!=-1&&MetaC._utagAutoPlay==true){MetaC.Video.unmute();MetaC.Video.play();}}}}}MetaC.Video={holdAutoplay:false,custParams:[],playlist:null,videoStartCBs:null,holderElemId:"videoContainer",wrapperElemId:"videoContainer_wrapper",startingWrapperClass:"video_wrapper",videoManager:null,videoPlayer:null,playerContextSet:false,autoplayStatus:"",setHoldAutoplay:function(a){MetaC.Video.holdAutoplay=a;},addToPlaylist:function(b,d,c){var a=MetaC.Video;
if(!a.playlist){a.playlist=[];}a.playlist.push({url:b,title:d,mc_id:c});},setIMATargeting:function(b,c){var a=MetaC.Video;if(!a.custParams){a.custParams=[];}a.custParams.push({name:b,value:c});},getCustParams:function(){var a=MetaC.Video;var c=null;if(a.custParams){c="";for(var b=0;b<a.custParams.length;b++){if(b>0){c+="&";}c+=a.custParams[b].name+"="+a.custParams[b].value;}}return c;},addVideoStartCallback:function(a){if(!MetaC.Video.videoStartCBs){MetaC.Video.videoStartCBs=[];}MetaC.Video.videoStartCBs.push(a);
},init:function(){if(!window.uvpjs){return;}var a=MetaC.Video;a.wrapperObj=$("#"+a.wrapperElemId);a.startingWrapper=$("."+a.startingWrapperClass);a.createVideoManager=function(){a.wrapperObj=$("#"+a.wrapperElemId);if(a.wrapperObj.length!=0&&!a.videoManager){a.videoManager=window.uvpjs.getVideoManager();var b={partner:"metacritic",usesIMA:true,enableReplay:true,uvpc:"/js/video/metacritic.xml",skin:true,playsInline:true};if(a.wrapperObj.data("mctrailerimg")){b.previewImage=a.wrapperObj.data("mctrailerimg");
}a.videoManager.initialize(b,a._onVideoManagerReady,a._onVideoManagerError);}};a.createVideoPlayer=function(){a.createVideoManager();if(!a.videoManager){return;}var d=a.uvpjsSystemInfo;var b=document.querySelector(".cutout");var c=true;if(b!=null||MC_USER_LOGGED_IN==true){c=false;}if((c==false)||(a.holdAutoplay)||(window.I11C&&window.I11C.Morph==1)){playerOptions={enableUnmutedAutoplay:false,enableMutedAutoplay:false};}else{playerOptions={enableUnmutedAutoplay:!d.isMobile&&d.supportsUnmutedAutoplay,enableMutedAutoplay:!d.isMobile&&d.supportsMutedAutoplay};
}if((d.supportsUnmutedAutoplay)||(d.supportsMutedAutoplay)){a.autoplayStatus="on";utag_data.videoAutoPlay=a.autoplayStatus;}else{a.autoplayStatus="off";utag_data.videoAutoPlay=a.autoplayStatus;}if((c==false)){a.autoplayStatus="off";utag_data.videoAutoPlay=a.autoplayStatus;}console.log("autoplay status "+utag_data.videoAutoPlay);if(a.wrapperObj.data("mctrailerimg")){playerOptions.previewImage=a.wrapperObj.data("mctrailerimg");}a.videoManager.createVideoPlayer(a.holderElemId,a._onVideoPlayerReady,playerOptions);
};a.startAssociatedVideo=function(){var b=a.wrapperObj.data("mcvideourl");var c=a.wrapperObj.data("mcvideotitle");if(a.videoPlayer){a.playUrl(b,c);}};a.updateBg=function(){var b=a.wrapperObj.data("mctrailerimg");if(b&&b!=""){var c=a.wrapperObj.find(".uvpjs__btn-preview");c.css("background-image","url("+b+")");}};a.play=function(){if(a.videoPlayer){a.videoPlayer.playVideo();}else{a.createVideoPlayer();}};a.mute=function(){if(a.videoPlayer){a.videoPlayer.mute();return true;}return false;};a.unmute=function(){if(a.videoPlayer){a.videoPlayer.unMute();
return true;}return false;};a.cancelPlaylist=function(){if(a.videoPlayer){a.videoPlayer.destroyPlaylist();}};a.pause=function(){if(a.videoPlayer){try{a.videoPlayer.pauseVideo();return true;}catch(b){}}else{return false;}};a.playUrl=function(b,g){if(a.wrapperObj.data("mcwarning")!=""){var h=MetaC.Cookie.get("mc_ag");if(h!="1"){a.ageGate.addClass("warning");return;}}if(!a.playerContextSet){if(window.utag_data&&a.videoPlayer.setPageContextMetadata){var f={sitePrimaryRsid:"cbsimetacriticsite",deviceType:utag_data.deviceType,siteType:utag_data.siteType,pageType:utag_data.pageType,siteSection:utag_data.siteSection,userState:utag_data.userState,userType:utag_data.userType,test:utag_data._test,videoAutoPlay:a.autoplayStatus};
var k=a.wrapperObj.data("mcproductid");if(k!=null){f.productID=k;}else{if(utag_data.movieId){f.productID=utag_data.movieId;}else{if(utag_data.gameId){f.productID=utag_data.gameId;}else{if(utag_data.showId){f.productID=utag_data.showId;}}}}a.videoPlayer.setPageContextMetadata(f);}a.playerContextSet=true;}var j="www.metacritic.com";var c="https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/8264/vaw-metacritic/desktop/metacritic&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url=[referrer_url]&description_url=www.metacritic.com&correlator=[timestamp]";
if(window.MC_ISMOBILE){c="https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/8264/vaw-metacritic/mobile_web/metacritic_mobile&ciu_szs=300x60,300x250&impl=s&gdfp_req=1&env=vp&output=vast2&unviewed_position_start=1&url=[referrer_url]&description_url=www.metacritic.com&correlator=[timestamp]";}var l=a.getCustParams();if(l||cbsiads_FBtoken){c+="&cust_params=";if(l){c+=encodeURIComponent(l);if(cbsiads_FBtoken){c+=encodeURIComponent("&");}}if(cbsiads_FBtoken){c+=encodeURIComponent("bidid=")+cbsiads_FBtoken+"";
}if(utag_data.pageType){c+=encodeURIComponent("&ptype=")+utag_data.pageType+"";}}a.videoPlayer.destroyPlaylist();var e=[{vidContId:a.holderElemId,type:uvpjs.mediaCapabilities.RP_IMA,adCall:c},{vidContId:a.holderElemId,type:uvpjs.mediaCapabilities.RP_URL,videoTitle:g,assetURL:b,mc_id:a.wrapperObj.data("mctrailerid")}];if(a.playlist){for(var d=0;d<a.playlist.length;d++){if(a.playlist[d].url!=b){e.push({vidContId:a.holderElemId,type:uvpjs.mediaCapabilities.RP_IMA,adCall:c});e.push({vidContId:a.holderElemId,type:uvpjs.mediaCapabilities.RP_URL,videoTitle:a.playlist[d].title,assetURL:a.playlist[d].url,mc_id:a.playlist[d].mc_id});
}}}a.videoPlayer.addResourcesToPlaylist(e);};a._onVideoManagerReady=function(b){MetaC.Video.uvpjsSystemInfo=b;MetaC.Video.createVideoPlayer();};a._onVideoManagerError=function(){if(window.MC_ISQA&&console&&console.log){console.log("MC Video Manager Error: "+args);}};a._onVideoPlayerReady=function(b){MetaC.Video.videoPlayer=b;b.addEventListener(uvpjs.EventType.RESOURCE_START+".metacritic",a.onResourceStart);b.addEventListener(uvpjs.EventType.AD_START+".metacritic",a.onAdStart);MetaC.Video.startAssociatedVideo();
};a.onAdStart=function(b){if(a.holdAutoplay){a.mute();a.pause();}};a.onResourceStart=function(b){if(b&&b.payload&&b.payload.rco&&b.payload.rco.type=="rp_url"){if(a.videoStartCBs){for(i=0;i<a.videoStartCBs.length;i++){a.videoStartCBs[i](b.payload.rco);}}}};a.floatBar=a.startingWrapper.find(".videoContainer_float_bar");if(a.floatBar.length>0){a.doneFloating=false;a.lastFloatTop=null;a.lastFloatLeft=null;$("a.toggle_expand_collapse").click(function(b){$(window).scroll();});a.floatBar.find(".videoContainer_close").one("click.floatingPlayer",function(){a.pause();
a.doneFloating=true;a.wrapperObj.removeClass("floating");$(window).off("scroll.floatingPlayer");if(window.makeUndraggable){makeUndraggable(".videoContainer_float_bar","#videoContainer_wrapper");}a.wrapperObj.css("top","auto");a.wrapperObj.css("left","auto");});$(window).on("scroll.floatingPlayer",function(f){if(!a.doneFloating){var c=$(window).scrollTop();var b=a.startingWrapper.offset().top+a.startingWrapper.height();var d=(b<=c);if(d&&a.videoPlayer){var g=a.videoPlayer.getCurrentPlaybackState();
if(g&&g.playbackStarted&&!a.wrapperObj.hasClass("floating")){a.wrapperObj.addClass("floating");if(window.makeDraggable){makeDraggable(".videoContainer_float_bar","#videoContainer_wrapper");}if(a.lastFloatTop){a.wrapperObj.css("top",a.lastFloatTop);}if(a.lastFloatLeft){a.wrapperObj.css("left",a.lastFloatLeft);}}}else{if(a.wrapperObj.hasClass("floating")){a.lastFloatTop=a.wrapperObj.css("top");a.lastFloatLeft=a.wrapperObj.css("left");if(a.lastFloatTop>0&&a.lastFloatTop=="-"){a.lastFloatTop="1px";}if(a.lastFloatLeft>0&&a.lastFloatLeft=="-"){a.lastFloatLeft="1px";
}if(window.makeUndraggable){makeUndraggable(".videoContainer_float_bar","#videoContainer_wrapper");}a.wrapperObj.removeClass("floating");a.wrapperObj.css("top","auto");a.wrapperObj.css("left","auto");}}}});}a.ageGate=a.startingWrapper.find(".agegate");a.ageGate.on(MetaC.clickEventName,".ag_button",function(){var d=17;if(a.wrapperObj.data("mcrating")=="13"){d=13;}var b=Number(a.ageGate.find(".year").val())+d;var c=new Date(b,a.ageGate.find(".month").val()-1,a.ageGate.find(".day").val());if(c.getTime()>new Date().getTime()){a.ageGate.find(".msg").show();
}else{MetaC.Cookie.save("mc_ag","1");a.ageGate.removeClass("warning");a.startAssociatedVideo();}});a.createVideoManager();return true;}};$(document).ready(function(){MetaC.Video.init();});MetaC.clickEventName="click";if(navigator.userAgent.match(/iPad/i)!=null){MetaC.clickEventName="touchstart";MetaC.isIPad=true;}MetaC.ursi={rating:{},setRating:function(a,c,b){MetaC.ursi.rating[MetaC.ursi._makeKey(a,c)]={timestamp:new Date(),value:b};},newerRating:function(a,d,c){var b=MetaC.ursi.rating[MetaC.ursi._makeKey(a,d)];
if(b&&b.timestamp){if(b.timestamp>c){return b.value;}}return -1;},_makeKey:function(a,b){return a+":"+b;}};MetaC.ImageSliders={slidersNext:null,slidersPrev:null,sliderTimer:null,init:function(){var a=MetaC.ImageSliders;a.slidersNext=$(".slider_arrow.slider_next");a.slidersPrev=$(".slider_arrow.slider_previous");a.slidersNext.on(MetaC.clickEventName,function(c){var b=$(this);a.slide(b,false);c.stopPropagation();return false;});a.slidersPrev.on(MetaC.clickEventName,function(c){var b=$(this);a.slide(b,true);
c.stopPropagation();return false;});$(".image_strip .product a").on("focus",function(){var b=$(this);setTimeout(function(){MetaC.ImageSliders.checkArrows(b);},10);});$(window).on("resize",function(){a.slidersNext.each(function(){MetaC.ImageSliders.checkArrows($(this));});});a.slidersNext.each(function(){MetaC.ImageSliders.checkArrows($(this));});},slide:function(b,f){var d=MetaC.ImageSliders.getStrip(b);if(d.length>0){var e=d.scrollLeft();var c=d.width();c-=c*0.1;if(f){e-=c;}else{e+=c;}if(e<0){e=0;
}if(!MetaC.isIPad){var a=b;d.animate({scrollLeft:e},400,function(){setTimeout(function(){MetaC.ImageSliders.checkArrows(a);},400);});}else{d.scrollLeft(e);}MetaC.ImageSliders.checkArrows(b);}},resetScroll:function(a){var b=MetaC.ImageSliders.getStrip(a);b.scrollLeft(0);MetaC.ImageSliders.checkArrows(a);},checkArrows:function(a){var c=MetaC.ImageSliders.getWrapper(a);if(MetaC.ImageSliders.moreRight(a)){c.addClass("more_right");}else{c.removeClass("more_right");clearInterval(MetaC.ImageSliders.sliderTimer);
}var b=MetaC.ImageSliders.getStrip(a);if(b.scrollLeft()>0){c.addClass("more_left");}else{c.removeClass("more_left");clearInterval(MetaC.ImageSliders.sliderTimer);}},moreRight:function(b){var g=MetaC.ImageSliders.getProducts(b);var h=MetaC.ImageSliders.getWrapper(b);var c=MetaC.ImageSliders.getStrip(b);if(g.length>0){var f=g.last();var a=f.position();var e=f.width();var d=c.scrollLeft();if(a.left+e>c.width()+d+1){return true;}}return false;},getWrapper:function(a){return a.parents(".image_strip_and_arrows");
},getStrip:function(a){var b=MetaC.ImageSliders.getWrapper(a);return b.find(".image_strip");},getProducts:function(a){var b=MetaC.ImageSliders.getWrapper(a);return b.find(".product");}};MetaC.SliderQWs={instances:[],addQWs:function(d,b,c,g,f){var a=MetaC.SliderQWs;var e=a.instances.push({stripObj:d,qObj:b,progress:c,callback:g,fixedUrls:f});e--;d.data("mcqwid",e);b.data("mcqwid",e);b.each(function(h){var k=$(this);var j=k.data("mcqwtype");switch(j){case"selects":k.on("change",function(m){var l=$(this);
MetaC.SliderQWs.getData(l);});break;case"tabs":k.children(".tab").on(MetaC.clickEventName,function(n){var m=$(this);var l=m.parent();l.children(".tab").removeClass("selected");m.addClass("selected");MetaC.SliderQWs.getData(l);});break;case"toggles":k.on(MetaC.clickEventName,".toggle_tab:not(.selected)",function(n){var m=$(this);var l=m.parent();l.children(".toggle_tab").removeClass("selected");m.addClass("selected");MetaC.SliderQWs.getData(l);});break;case"checks":k.children(".checkbox").on(MetaC.clickEventName,function(q){var p=$(this);
var o=p.parent();var n=o.data("mcqwmin");if(n=="1"){var m=p.hasClass("checked");var l=o.find(".checked");if(l.length==1&&m==true){o.find(".checkbox").addClass("checked");}}p.toggleClass("checked");MetaC.SliderQWs.getData(o);});break;}});},getData:function(c){var l=c.data("mcqw");if(!l){return;}var k=c.data("mcqwid");var p=MetaC.SliderQWs.instances[k];if(p.fixedUrls){var h=c;var m=h.data("mcqwtype");var d=null;switch(m){case"selects":if(h.is("select")){d=h.val();}else{var f=h.find(".option.selected");
d=f.data("mcqwval");}break;case"tabs":var f=h.children(".tab.selected");d=f.data("mcqwval");break;case"toggles":var f=h.children(".toggle_tab.selected");var g=f.data("mcqwval");d=g;var j=f.data("mcqparam");if(j){d=window.location.pathname;if(g!=null&&g!==""){d+="?";d+=f.data("mcqparam")+"[]="+g;}}break;case"checks":var o=h.children(".checkbox.checked");d=window.location.pathname;d+="?";o.each(function(q){if(q>0){d+="&";}var r=$(this);d+=r.data("mcqparam")+"[]="+r.data("mcqwval");});break;}window.location=d;
return;}var n=$('[data-mcqw="'+l+'"]');if(n.length==0){return;}var e={qwk:l};n.each(function(z){var u=$(this);var v="0";var x=u.data("mcqwset");if(x){v=x;}var w=u.data("mcqwtype");var q="qw_"+v;var y={};var t=null;var s=null;switch(w){case"selects":if(u.is("select")){t=u.val();t="val_"+t;}else{s=u.find(".option.selected");}break;case"tabs":s=u.children(".tab.selected");break;case"toggles":s=u.children(".toggle_tab.selected");break;case"checks":var r=u.children(".checkbox");r.each(function(A){var B=$(this);
y[B.data("mcqwqname")]=B.hasClass("checked");});break;}if(s){t=s.data("mcqwqname");if(t==null){t="val_"+s.data("mcqwval");}y[t]=true;}if(y){e[q]=y;}});var b=p.stripObj;var a=window.location.pathname+"?"+$.param(e);b.css("opacity",0.5);MetaC.Progress.show(p.progress);if(p.callback){p.callback(c,true);}$.ajax({url:a,type:"GET",success:function(q){b.empty();b.append(q);MetaC.ImageSliders.resetScroll(b);MetaC.imageErrorHelper(b);},complete:function(){b.css("opacity",1);MetaC.Progress.hide(p.progress);
if(p.callback){p.callback(c,false);}}});}};MetaC.Thumbs={init:function(){$(".helpful .thumb_up").on(MetaC.clickEventName,function(){var a=$(this);if(a.hasClass("selected")){return;}MetaC.Thumbs.thumbIt(a,1);});$(".helpful .thumb_down").on(MetaC.clickEventName,function(){var a=$(this);if(a.hasClass("selected")){return;}MetaC.Thumbs.thumbIt(a,0);});},thumbIt:function(d,b,h){var g=d;var e=b;var f=d.parents(".helpful");var c=f.data("mcrefid");var k=f.data("mcreftype");var j=d.parents(".reviews").find('[name="csrf"]');
var a=j.val();MetaC.Progress.show(f);$.post("/_thumb/ajxset",{thumb:b,csrf:a,ref_id:c,ref_type_id:k},function(m){MetaC.Progress.hide(f);if(m.csrf){if(j.length>0&&!h){j.val(m.csrf);setTimeout(function(){MetaC.Thumbs.thumbIt(g,e,1);},1);}else{var l=f.find(".msg");l.text("Please refresh the page and try again.");}}else{if(m.success){f.find(".selected").removeClass("selected");d.addClass("selected");f.find(".yes_count").text(m.total_ups);f.find(".total_count").text(m.total_thumbs);f.find(".thumb_up .count").text(m.total_ups);
f.find(".thumb_down .count").text(m.total_downs);}else{if(m.login){f.find(".msg").html('You must <a href="javascript:void(0)" onclick="MetaC.sLogin();">log in</a> before rating.');}}}},"json");}};MetaC.TrailerList={wrapperName:"trailer_list_wrapper",moreInfoLink:null,init:function(){var a=MetaC.TrailerList;var b=$("."+a.wrapperName);a.moreInfoLink=b.find(".more_info a");a.wasSelected=b.find(".title_list .selected");a.setTo(a.wasSelected);b.on(MetaC.clickEventName,".title_list tr",function(){var c=$(this);
a.setTo(c);MetaC.Video.cancelPlaylist();MetaC.Video.startAssociatedVideo();});},updateBg:function(c){if(c==null||c.length<1){return;}var a=MetaC.TrailerList;var e=a.getWrapper(c);if(e){e.find(".title_list .selected").removeClass("selected");}c.addClass("selected");var b=c.data("bgimg");if(b!=null&&b!=""){if(e){e.css("background-image","url("+b+")");}}else{if(e){e.css("background-image","url(https://static.metacritic.com/images/products/movies/120w-movie.jpg)");}}var d=c.data("mctrailerurl");if(d!=null&&d!=""){if(e){e.removeClass("no_video");
}}else{if(e){e.addClass("no_video");}}},setTo:function(d,l){var g=MetaC.TrailerList;var n=d;if(l){var a=g.getWrapper(d);if(a){var p=a.find(".title_list .list_item");n=p.eq(l-1);}}g.updateBg(n);if(n){var j=n.data("mctrailerid");var e=n.data("mctrailerurl");var m=n.data("mcvideourl");var k=n.data("mcwarning");var c=n.data("mcrating");var f=n.data("mcsummaryurl");var h=n.data("mctrailerimg");var o=n.find(".item_name").text();var b=$("#videoContainer_wrapper");b.data("mctrailerurl",e);b.attr("data-mctrailerurl",e);
b.data("mcvideourl",m);b.attr("data-mcvideourl",m);b.data("mcvideotitle",o);b.attr("data-mcvideotitle",o);b.data("mcwarning",k);b.attr("data-mcwarning",k);b.data("mcrating",c);b.attr("data-mcrating",c);b.data("mctrailerid",j);b.attr("data-mctrailerid",j);b.data("mctrailerimg",h);b.attr("data-mctrailerimg",h);MetaC.Video.updateBg();g.moreInfoLink.attr("href",f);}g.wasSelected=n;},getWrapper:function(b){if(b==null||b.length<1){return null;}var a=MetaC.TrailerList;if(b.hasClass(a.wrapperName)){return b;
}return b.parents("."+a.wrapperName);}};MetaC.RatingWidget={lastRatingObj:null,needRefresh:null,init:function(){var a=MetaC.RatingWidget;a.hoverTimer=null;a.ratingWidget=$(".user_rating_widget");a.indicatorClassMatch=new RegExp(/(?:\s|^)ur_(\d+)/);a.ratingWidget.on("mouseenter",".ur",function(b){if(a.hoverTimer!=null){clearTimeout(a.hoverTimer);a.hoverTimer=null;}a.clearHover();a.hideCurrentRating();var c=$(this);while(c.length>0){c.addClass("h100");c=c.prev(".ur");}});a.ratingWidget.on("mouseleave",".ur",function(b){if(a.hoverTimer!=null){clearTimeout(a.hoverTimer);
}a.hoverTimer=setTimeout(function(){a.clearHover();a.restoreCurrentRating();},200);});a.ratingWidget.on(MetaC.clickEventName,".ur",function(d){a.lastRatingObj=$(this);var c=a.ratingWidget.data("disponly");if(c=="1"){a.displayRating();}else{var b=a.determineRating(a.lastRatingObj);var e=a.determineRating(a.ratingWidget.find(".ur.p100x").last());if(b!=e){a.rate();}}});a.clearHover=function(){a.ratingWidget.find(".h100").removeClass("h100");};a.hideCurrentRating=function(){a.ratingWidget.find(".p100").removeClass("p100").addClass("p100x");
};a.restoreCurrentRating=function(){a.ratingWidget.find(".p100x").removeClass("p100x").addClass("p100");};a.clearCurrentRating=function(){a.ratingWidget.find(".p100").removeClass("p100");a.ratingWidget.find(".p100x").removeClass("p100x");};a.displayRating=function(){a.clearCurrentRating();var b=a.lastRatingObj;while(b.length>0){b.addClass("p100");b=b.prev(".ur");}};},determineRating:function(c){var a=MetaC.RatingWidget;var d=null;var b=a.indicatorClassMatch.exec(c.attr("class"));if(b!=null&&b.length>1){d=b[1];
}return d;},rate:function(c){var a=MetaC.RatingWidget;var b=a.determineRating(a.lastRatingObj);if(b){MetaC.Progress.show(a.ratingWidget);var e={score:b,ref_type_id:a.ratingWidget.data("reftype"),ref_id:a.ratingWidget.data("refid"),csrf:a.ratingWidget.data("csrf")};var d=a.ratingWidget.find(".info");d.html("");$.post("/jl/rate/set-rating",e,function(h){a.clearHover();var f=$(".popup_rating .my_score .metascore_w");if(h.scoreword){f.removeClass("positive mixed negative tbd");f.addClass(h.scoreword.toLowerCase());
}f.text(b);MetaC.Progress.hide(a.ratingWidget);if(h.success){a.displayRating();if(window.om){if(window.om!=undefined&&om.trackRatingsAdd){om.trackRatingsAdd({rating:b});}}d.html("Your rating has been saved.");var g=MetaC.Popup.display({alignElement:$(".ms_wrapper .title_bump"),leftElements:$(".rt_wrapper .popup_hidden .popup_rating"),rightElements:$(".rt_wrapper .popup_hidden .post_rating"),header:$(".rt_wrapper .popup_hidden .post_rating_header .header"),closeCallback:function(){g.off();}});g.on(MetaC.clickEventName,".popup_no_btn",function(){MetaC.Popup.hide();
});g.on(MetaC.clickEventName,".popup_review_btn",function(){if(h.oldReviewId){var k=$(".write_review a").attr("href");if(k!=null&&k!=""){window.location=k;return;}}var j=MetaC.Popup.display({alignElement:$(".ms_wrapper .title_bump"),leftElements:$(".rt_wrapper .popup_hidden .popup_write"),header:$(".rt_wrapper .popup_hidden .popup_write_header .header"),singleWide:true,closeCallback:function(){j.off();}});var l=j.find(".popup_char_count");j.on(MetaC.clickEventName,".popup_review_submit_btn",function(){MetaC.Popup.feedback();
MetaC.Progress.show(j);var m={ajxSetRvw:1,csrf:a.ratingWidget.data("csrf"),review_body:j.find(".popup_write_review").val(),review_score:b,review_spoiler:j.find(".popup_spoiler").is(":checked")?"1":"0"};$.post(document.location,m,function(n){MetaC.Progress.hide(j);if(n.postError){MetaC.Popup.feedback(n.postError);}else{d.html("Your review has been submitted.");MetaC.Popup.hide();}});});j.on("keyup",".popup_write_review",function(){var n=$(this);var o=n.val();o=o.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n");
var m=o.length;l.text(m);if(m!=0&&(m<75||m>5000)){l.addClass("error");}else{l.removeClass("error");}});});}else{if(h.pendingUser){d.html('You must <a href="/send-confirm">confirm your email address</a> before rating.');}else{if(h.login){MetaC.PopupLogin.display({alignElement:$(".ms_wrapper .title_bump"),leftElements:$(".rt_wrapper .popup_hidden .popup_rating"),header:$(".rt_wrapper .popup_hidden .popup_rating_header .header"),loginCallback:function(){a.needRefresh=true;a.rate();}});}else{if(h.csrf){if(!c){a.ratingWidget.data("csrf",h.csrf);
a.rate(true);}else{d.html("Please refresh the page and try again.");}}else{if(h.suspended&&h.suspended==1){d.html("You are not allowed to submit ratings at this time.");a.clearCurrentRating();}else{if(h.errors){d.html(h.errors);}else{d.html("Please try again later.");}}}}}}$(".no_viewer_score").removeClass("no_viewer_score");},"json");}}};MetaC.Popup={inited:false,lastOptions:null,init:function(){var a=MetaC.Popup;if(a.inited){return;}a.inited=true;a.popup=$("#popup_dialog");a.header=a.popup.find("header");
a.footer=a.popup.find("footer");a.left=a.popup.find(".left");a.right=a.popup.find(".right");},display:function(b){var a=MetaC.Popup;a.init();if(b==null){b={};}a.lastOptions=b;a.header.empty().hide();a.footer.empty().hide();a.left.empty().hide();a.right.empty().hide();if(b.singleWide){a.popup.addClass("single_wide");}else{a.popup.removeClass("single_wide");}if(b.leftElements){a.left.append(b.leftElements.clone());a.left.show();}if(b.rightElements){a.right.append(b.rightElements.clone());a.right.show();
}if(b.header){a.header.append(b.header.clone());a.header.show();}$(window).on("resize.Popup",function(){a.align();});a.align();a.popup.show();return a.popup;},feedback:function(b){var a=MetaC.Popup;if(b==null){a.footer.empty().hide();}else{a.footer.html(b).show();}},align:function(){var a=MetaC.Popup;if(a.lastOptions.alignElement){var b=a.lastOptions.alignElement.position();a.popup.css({position:"absolute",left:b.left,top:b.top});}else{a.popup.css({position:"absolute",left:function(){return($(window).width()-$(this).outerWidth())/2;
},top:function(){return($(window).height()-$(this).outerHeight())/2;}});}},hide:function(){var a=MetaC.Popup;$(window).off("resize.Popup");if(a.lastOptions.closeCallback){a.lastOptions.closeCallback();}a.popup.hide();}};MetaC.PopupLogin={lastOptions:null,display:function(c){if(c==null){c={};}var a=MetaC.PopupLogin;a.lastOptions=c;if($("#popup_email").length==0){var d=$("#popup_email_wrapper");d.find(".field").append('<input id="popup_email" class="field_input popup_email" tabindex="2" name="email" type="email" autocomplete="off"><label for="popup_email">Email Address</label>');
}if($("#popup_password").length==0){d=$("#popup_pwd_wrapper");d.find(".field").append('<input id="popup_password" class="field_input popup_password" tabindex="3" name="password" type="password" autocomplete="off"><label for="popup_password">Password</label>');d.find(".popup_forgot a").text("Forgot password?");}var b=$("#popup_login").find(".login_section");if(c.leftElements){c.rightElements=b;}else{c.leftElements=b;}a.popup=MetaC.Popup.display(c);a.popup.on(MetaC.clickEventName+".PopupLogin",".popup_signup_btn",function(){MetaC.sSignup();
});a.popup.on(MetaC.clickEventName+".PopupLogin",".popup_forgot",function(){MetaC.sForgotPwd();});a.popup.on(MetaC.clickEventName+".PopupLogin",".popup_login_btn",function(){a.login();});a.popup.on(MetaC.clickEventName+".PopupLogin",".meta_fb_login",function(){var e=MetaC.PopupLogin;MetaC.Progress.show(e.popup);MetaC.Popup.feedback();MetaC.URS.authFB(function(f,g){if(f==URS.events.AUTH_SUCCESS){$.post("/signup",{fblogin:1},function(h){if(h&&h.success){MetaC.Progress.hide(e.popup);e._loginFinished();
}else{MetaC.sSignupFB();}});}if(f==URS.events.AUTH_FAILED_INVALID_USER||f==URS.events.AUTH_FAILED_NO_LINK){MetaC.sSignupFB();}else{MetaC.Progress.hide(e.popup);MetaC.Popup.feedback("Unable to login via Facebook.  Please try again later.");}});});a.popup.on("keyup.PopupLogin",function(e){if(e.keyCode==13){a.login();}});a.popup.find(".popup_email").focus();},login:function(){var a=MetaC.PopupLogin;MetaC.Progress.show(a.popup);MetaC.Popup.feedback();var c={login:true};c.email=a.popup.find("#popup_email").val();
c.password=a.popup.find("#popup_password").val();var b="/login";b=MetaC.getSecureUrl(b);$.ajax({type:"POST",url:b,data:c,crossDomain:true,dataType:"json",xhrFields:{withCredentials:true},headers:{"X-Requested-With":"XMLHttpRequest"},error:function(d,f,e){MetaC.Progress.hide(a.popup);MetaC.Popup.feedback(f);},success:function(d){MetaC.Progress.hide(a.popup);if(d.errors){MetaC.Popup.feedback(d.errors.login);}else{a._loginFinished();}}});},_loginFinished:function(){var a=MetaC.PopupLogin;if(a.lastOptions.loginCallback){a.lastOptions.loginCallback();
a.hide();}else{window.location.reload();}},hide:function(){var a=MetaC.PopupLogin;a.popup.off();MetaC.Popup.hide();}};$(window).on("popstate",function(a){if(a.originalEvent.state&&a.originalEvent.state.popType&&a.originalEvent.state.popType=="gallery2"&&a.originalEvent.state.slideNum){MetaC.Gallery2.showSlide(a.originalEvent.state.slideNum,true);}else{MetaC.Gallery2.showSlide($("#theslides").data("mcslide"),true);}});$(document).ready(function(){if(window.MC_ISQA){MetaC.imageInfoHelper=function(){$(".product img").each(function(){var a=$(this).parent();
a.append('<div class="debug_label">'+this.naturalWidth+"w "+this.naturalHeight+"h </div>");});};$(document).on("keypress",function(a){if(a.which===937&&a.altKey){MetaC.imageInfoHelper();}});}$("#user_review_submit").on(MetaC.clickEventName,function(){var d=$("#review_body");var e=false;if(!d.is(":disabled")){var h=$(".review_it_wrapper");var a=$(".user_rating_widget");var g=a.find(".info");var b=MetaC.RatingWidget.determineRating(a.find(".ur.p100").last());var c=$("#viewers_review_id").val();if(b){MetaC.Progress.show(h);
var f={ajxSetRvw:1,csrf:a.data("csrf"),review_body:d.val(),review_score:b,review_spoiler:h.find(".spoiler").hasClass("checked")?"1":"0"};if(c){f.review_id=c;}$.post(document.location,f,function(j){MetaC.Progress.hide(h);if(j.csrf){if(!e){a.data("csrf",j.csrf);e=true;$("#user_review_submit").click();}else{g.html("Please refresh the page and try again.");}}else{if(j.postError){g.html(j.postError);}else{g.html("Your review has been submitted.");}}});}else{g.html("Please select a rating.");}}});$(".hover_question").hover(function(){$(this).siblings(".hover_answer").show(400);
},function(){$(this).siblings(".hover_answer").hide();});$(".flat_checkbox").on(MetaC.clickEventName,function(){$(this).toggleClass("checked");});$("table.list .inline_see_more").on(MetaC.clickEventName,function(){$(this).closest(".summary_row").addClass("expanded").next(".details_row").addClass("expanded");});$("table.list .inline_see_less").on(MetaC.clickEventName,function(){$(this).closest(".details_row").removeClass("expanded").prev(".summary_row").removeClass("expanded");});MetaC.ImageSliders.init();
MetaC.RatingWidget.init();MetaC.Thumbs.init();});MetaC.imageErrorHelper=function(a){$(".product img",a).on("error",function(){var d=$(this);if(d.data("doneerroronce")){this.src="/images/products/movies/98w-movie.jpg";return;}var b=this.src.lastIndexOf(".");var c=this.src.substring(0,b)+"-98"+this.src.substring(b);d.data("doneerroronce",true);this.src=c;});};$(window).on("message",function(a){if(a.originalEvent.data&&typeof a.originalEvent.data==="string"){var b=a.originalEvent.data.indexOf("nativeAdBlankServed_bidtellect");
if(b===0){$("#native_top").hide();}}});if(window.Meta$==null){if(window.jQuery){window.Meta$=window.jQuery;}else{if(window.Zepto){window.Meta$=window.Zepto;}}}if(window.Meta$&&window.Meta$.trim){if(!window.MetascoreW){MetascoreW={existing:[],process:function(a){var c=a?a.find(".metascore_w[data-meta-path]"):Meta$(".metascore_w[data-meta-path]");var b={};var e=false;c.each(function(f){var h=Meta$(this);var g=h.data("metaPath");if(g){g=Meta$.trim(g);if(g!=""&&h.data("metasdone")!="1"){if(MetascoreW.existing[g]){MetascoreW._setValues(h,MetascoreW.existing[g]);
}else{var j=h.attr("id");if(!j||Meta$.trim(j)==""){j="ms"+f+Date.now();h.attr("id",j);}e=true;b[j]=g;}}}});if(e){var d=Meta$.param({paths:b});Meta$.ajax({type:"POST",url:"/metascore_w",data:d,success:function(g){if(g&&g.results){for(elemId in g.results){if(g.results.hasOwnProperty(elemId)){var f=g.results[elemId];if(f){var h=Meta$("#"+elemId);MetascoreW._setValues(h,f);MetascoreW.existing[b[elemId]]=f;}}}}}});}},_setValues:function(b,a){if(b&&b.length>0&&a){if(a.score){b.text(a.score);}if(a.describe){b.removeClass(function(c,d){return(d.match(/(^|\s)score_\S+|red|green|yellow|negative|mixed|positive|good|bad/g)||[]).join(" ");
});b.addClass("score_"+a.describe);}if(b.is("a")&&a.url){b.attr("href",a.url);}b.data("metasdone","1");}}};}Meta$(document).ready(function(){MetascoreW.process();});}makeDraggable=function(a,c){var b=$(a);var d=b;if(c){d=$(c);}b.on("mousedown.makeDraggable",function(h){var g=d.position();var j=(d.css("position")=="fixed");if(jQuery){var f=jQuery().jquery;if(f&&f.charAt(0)=="2"){j=false;}}var k={dx:h.pageX-g.left,dy:h.pageY-g.top};d.addClass("dragging");$("body").on("mousemove.makeDraggable",function(n){var m=n.pageX-k.dx;
var l=n.pageY-k.dy;if(j){l-=$(window).scrollTop();}d.css("left",m);d.css("top",l);return false;});});$("body").on("mouseup.makeDraggable",function(f){$(this).off("mousemove.makeDraggable");d.removeClass("dragging");});};makeUndraggable=function(a,c){var b=$(a);var d=b;if(c){d=$(c);}b.off("mousedown.makeDraggable");$("body").off("mousemove.makeDraggable");d.removeClass("dragging");};